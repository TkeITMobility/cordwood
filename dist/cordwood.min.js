!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(){}function o(e){return function(t){for(var n in t)t.hasOwnProperty(n)&&e(t[n])}}function i(e){return function(t){for(var n=t.length;n>-1;n-=1)t.hasOwnProperty(n)&&!e(t[n])&&t.splice(n,1);return t}}function s(e){return function(t){r(t);var n=t.split("/");if(n=i(function(e){return""!==e})(n),0!==n.length){if(!(n.length>0))throw r(n),new Error("This should never happen");r("directoryNames before shift:",n);var o=n.shift(1);r("directoryNames after shift:",n),e.getDirectory(o,{create:!0},function(e){r("directoryNames in callback:",n),r("Calling makeDirectoryCreator again with "+n.join("/")),s(e)(n.join("/"))},function(){throw new Error(["Couldn't create nested directory",t].join(" "))})}}}function a(e,t){E=t||cordova.file.dataDirectory,e=e||y.DEFAULT_ASSET_DIRECTORIES,"string"==typeof e&&(e=[e]),o(function(e){S.push(e)})(e),r("setup running"),resolveLocalFileSystemURL(E,function(e){s(e)(y.CSS_DIRECTORY)}),"true"!==localStorage.hasAssetServiceRun&&(localStorage.hasAssetServiceRun="true",g())}function c(e,t){return e=e.name||e,t=t.name||t,function(n){throw new Error(["At",e,"to",t,n].join(" "))}}function u(e){return function(t,n,r){e.getFile(t,null,r,p(function(){e.getDirectory(t,null,r,function(e){throw new Error("Error code "+e.code+"Couldn't get child: "+t)})}))}}function l(e,t){r(["copying directory",e,"into",t].join(" ")),e.createReader().readEntries(function(e){o(function(e){var n=e.name;if(r("name: "+n),e.isFile===!0)t.getFile(n,{create:!0},d(e));else{if(e.isDirectory!==!0)throw new Error("Neither file nor directory");t.getDirectory(n,{create:!0},d(e))}u(t)(n,d(e))})(e)},c(e,t))}function f(e,t){if(r(["copying entry",e,"into",t].join(" ")),"string"==typeof e)return resolveLocalFileSystemURL(e,function(e){f(e,t)},c(e,t));if("string"==typeof t)return resolveLocalFileSystemURL(t,function(t){f(e,t)},c(e,t));if(e.isDirectory)l(e,t);else{if(!e.isFile)throw new Error("Entry is neither a directory nor a file");v(e,t)}}function d(e){return function(t){return f(e,t)}}function g(){o(function(e){r(e),resolveLocalFileSystemURL(cordova.file.applicationDirectory+e,function(t){resolveLocalFileSystemURL(E,function(n){n.getDirectory(e,{create:!0},d(t),c(t,e))})},function(e){throw new Error(e)})})(S)}function p(e){return function(t){if(t.code==FileError.TYPE_MISMATCH_ERR)return e();throw new Error("Error: "+t.code)}}function h(e){return function(t){e.createWriter(function(e){return r("we're writing: ",t.target.result),e.write(t.target.result)},c(t,e))}}function v(e,t){return r(["copying file",e,"into",t].join(" ")),e.file(function(n){var o=new FileReader;o.onloadend=h(t),r(["Writing from",e,"to",t].join(" ")),o.readAsArrayBuffer(n)})}var E,m={setup:a},y=e("./constants"),S=[];t.exports=m},{"./constants":3}],2:[function(e,t,n){"use strict";function r(e){c("files",e);for(var t=0;t<e.length;t++){var n=e[t].fileEntry;u.injectFile(n.nativeURL)}setTimeout(u.successCallback,500)}function o(e){c(e),u.errorCallback()}var i=e("./read-service"),s=e("./constants"),a=e("./utils"),c=e("./logger"),u={};u.setup=function(e,t){this.successCallback=e,this.errorCallback=t},u.init=function(e){var t=[e+"_"+s.JS_FILE_NAME,s.CSS_DIRECTORY+e+"_"+s.CSS_FILE_NAME];i.setup(r,o),i.readFiles(t)},u.injectFile=function(e){if(a.hasFileExtension(e,"js")){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e)}else{if(!a.hasFileExtension(e,"css"))return;t=document.createElement("link"),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e)}document.getElementsByTagName("head")[0].appendChild(t)},u._injectAllFiles=r,u._errorReadingFiles=o,t.exports=u},{"./constants":3,"./logger":6,"./read-service":7,"./utils":11}],3:[function(e,t,n){"use strict";var r={JS_FILE_NAME:"app.js",CSS_DIRECTORY:"www/css/",CSS_FILE_NAME:"app.css",DEFAULT_ASSET_DIRECTORIES:["www/img","www/fonts"],LATEST_VERSION_URL:"version.json",MASTER_PATH:"/branch/master",ALL_VERSIONS_URL:"/versions.json",DEBUG:!1};t.exports=r},{}],4:[function(e,t,n){"use strict";function r(){c("start download");for(var e=0;e<l.length;e++)i(l[e])}function o(){if(c("check",f),f.length===l.length){for(var e=!0,t=0;t<f.length;t++)if(!f[t].downloaded){e=!1;break}e?u.successCallback(f):u.errorCallback("Unable to download all files")}}function i(e){function t(t){f.push({url:e,fileUrl:t,downloaded:!0}),o()}function n(t){c(t),f.push({url:e,downloaded:!1}),o()}var r=cordova.file.dataDirectory,i=u.versionToFetch+"_";a.hasFileExtension(e,"js")?i+=s.JS_FILE_NAME:a.hasFileExtension(e,"css")?(i+=s.CSS_FILE_NAME,r+=s.CSS_DIRECTORY):u.errorCallback("Encountered unexpected filetype",e),window.resolveLocalFileSystemURL(r,function(r){r.getFile(i,{create:!0,exclusive:!1},function(r){var o=new FileTransfer;r.remove(),o.download(e,r.nativeURL,t,n)},n)},n)}var s=e("./constants"),a=e("./utils"),c=e("./logger"),u={},l=[],f=[];u.setup=function(e,t,n){this.versionToFetch=n,this.successCallback=e,this.errorCallback=t,l=[],f=[],c("version being fetched by download: ",n)},u.downloadUrls=function(e){if("string"==typeof e)l.push(e);else{if(!e||e.constructor!==Array)throw"Url's must be String or Array";l=e}c("downloadsQueue:",l),r()},t.exports=u},{"./constants":3,"./logger":6,"./utils":11}],5:[function(e,t,n){"use strict";function r(e){function t(e,t){a("new _version is %s",t),s.setup(n,r,t),s.downloadUrls(e)}function n(){l.setCurrent(l.getUpdated()),o.init(l.getCurrent())}function r(e){a(e),o.init(l.getCurrent())}function f(){l.didUpdate()?(a("version changed calling api to download files"),t(u.files,l.getUpdated())):(a("version did not change loading version: %s",l.getCurrent()),o.init(l.getCurrent()))}function d(e){c.init(e,function(e){c.teardown(),l.fetchLatestVersion(e,f)})}u.setBase(e.baseUrl),u.initForMaster();var g=e.currentVersion,p=e.successCallback,h=e.errorCallback,v=e.multipleVersions||!1,E=e.assetDirectories;!function(){i.setup(E),o.setup(p,h),void 0===l.getCurrent()&&l.setCurrent(g),v?l.fetchAllVersions(u.allVersions,d,function(){l.fetchLatestVersion(u.latestVersion,f)}):l.fetchLatestVersion(u.latestVersion,f)}()}var o=e("./bootstrap"),i=e("./asset-service"),s=e("./download-service"),a=e("./logger"),c=e("./ui"),u=e("./urls"),l=e("./version");window.Cordwood=r},{"./asset-service":1,"./bootstrap":2,"./download-service":4,"./logger":6,"./ui":9,"./urls":10,"./version":12}],6:[function(e,t,n){"use strict";var r=e("./constants"),o=function(){r.DEBUG&&console.info.apply(this,arguments)};t.exports=o},{"./constants":3}],7:[function(e,t,n){"use strict";function r(){s("start reading");for(var e=0;e<c.length;e++)i(c[e])}function o(){if(s("check",u),c.length===u.length){for(var e=!0,t=0;t<u.length;t++)if(!u[t].read){e=!1;break}e?a.successCallback(u):a.errorCallback("Unable to read all files")}}function i(e){function t(t){s(t.nativeURL),u.push({filename:e,fileEntry:t,read:!0}),o()}function n(t){s(t),u.push({filename:e,read:!1}),o()}s(cordova.file.dataDirectory,e),window.resolveLocalFileSystemURL(cordova.file.dataDirectory+e,t,n)}var s=e("./logger"),a={},c=[],u=[];a.setup=function(e,t){this.successCallback=e,this.errorCallback=t,c=[],u=[]},a.readFiles=function(e){if("string"==typeof e)c.push(e);else{if(!e||e.constructor!==Array)throw"File name's must be String or Array";c=e}s("readQueue:",c),r()},t.exports=a},{"./logger":6}],8:[function(e,t,n){"use strict";var r=e("./utils"),o={};o.jsonCSS={body:{color:"#607D8B",fontFamily:"sans-serif",margin:0},header:{backgroundColor:"#fff",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24)",left:0,padding:"0 1.5rem",position:"fixed",margin:0,top:0,width:"100%"},h1:{height:"5rem",lineHeight:"5rem",margin:0},ul:{listStyle:"none",margin:"5.5rem 0 0 0",padding:0},li:{backgroundColor:"#ECF8FE",border:"1px solid #a3ddfa",borderRadius:"4px",height:"5rem",lineHeight:"5rem",margin:"0.5rem",padding:"0 1rem"},"li:active,li:focus":{backgroundColor:"#ccecfc"}},o.getByType=function(e){if("get"!==e&&e in o.jsonCSS){for(var t=o.jsonCSS[e],n=e+" { ",i=Object.keys(t),s=0;s<i.length;s++)n+=r.toSnakeCase(i[s])+": "+String(t[i[s]])+"; ";return n+"}"}},o.get=function(){for(var e=Object.keys(o.jsonCSS),t="",n=0;n<e.length;n++)t+=o.getByType(e[n])+" ";return t},t.exports=o},{"./utils":11}],9:[function(e,t,n){"use strict";function r(e){return["<strong>PR#",e.pr,"</strong>","(",e.branch,")"].join(" ")}function o(e,t){var n=document.createElement("li");return n.innerHTML=r(e),n.onclick=function(){return function(){return g.initForPr(e.path),e.latestVersion=g.latestVersion,t(e.latestVersion)}}(),n}function i(e,t){var n=document.createElement("ul");n.id="js-ui-list",e.forEach(function(e){n.appendChild(o(e,t))}),l.appendChild(n)}function s(){var e=document.createElement("header");e.id="js-ui-header";var t=document.createElement("h1");t.innerHTML="Available Versions",e.appendChild(t),l.appendChild(e)}function a(){var e=document.createElement("style");e.type="text/css",e.id="js-ui-styles",e.appendChild(document.createTextNode(d.get())),f.appendChild(e)}function c(e,t){f=document.head,l=document.body,a(),s(),i(e,t)}function u(){var e=document.getElementById("js-ui-header"),t=document.getElementById("js-ui-list"),n=document.getElementById("js-ui-styles");e.parentNode.removeChild(e),t.parentNode.removeChild(t),n.parentNode.removeChild(n)}var l,f,d=e("./styles"),g=e("./urls");t.exports.init=c,t.exports.teardown=u},{"./styles":8,"./urls":10}],10:[function(e,t,n){"use strict";var r=e("./constants"),o={};o.setBase=function(e){o.base=e},o.initForMaster=function(){var e=o.base+r.MASTER_PATH+"/";o.files=[e+r.JS_FILE_NAME,e+r.CSS_FILE_NAME],o.allVersions=o.base+r.ALL_VERSIONS_URL,o.latestVersion=e+r.LATEST_VERSION_URL},o.initForPr=function(e){var t=o.base+(e||r.MASTER_PATH)+"/";o.files=[t+r.JS_FILE_NAME,t+r.CSS_FILE_NAME],o.latestVersion=t+r.LATEST_VERSION_URL},t.exports=o},{"./constants":3}],11:[function(e,t,n){"use strict";function r(e,t){if(e&&t){var n="."+t.toLowerCase(),r=e.length-n.length;return e.toLowerCase().lastIndexOf(n)===r}return!1}var o=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})};t.exports.hasFileExtension=r,t.exports.toSnakeCase=o},{}],12:[function(e,t,n){"use strict";var r=e("./logger"),o={};o.fetchAllVersions=function(e,t,n){r("fetching all available versions from %s",e);var o=new XMLHttpRequest;return o.open("GET",e+"?"+(new Date).getTime(),!0),o.responseType="json",o.timeout=4e3,o.ontimeout=function(){r("unable to get all versions; Timed out"),n()},o.onerror=function(e){r("unable to get all versions",e),n()},o.onreadystatechange=function(){4==this.readyState&&200==this.status&&t(this.response.prs)},o.send(),o},o.fetchLatestVersion=function(e,t){r("fetching new version from %s",e);var n=new XMLHttpRequest;return n.open("GET",e+"?"+(new Date).getTime(),!0),n.responseType="json",n.timeout=4e3,n.ontimeout=function(){r("unable to check version Timed out"),t(),o.setUpdated(o.getCurrent())},n.onerror=function(e){r("unable to check version",e),t(),o.setUpdated(o.getCurrent())},n.onreadystatechange=function(){4==this.readyState&&200==this.status&&(o.setUpdated(this.response.version),t())},n.send(),n},o.didUpdate=function(){return o.getUpdated()!==o.getCurrent()},o.setCurrent=function(e){localStorage.CURRENT_VERSION=e},o.getCurrent=function(){return localStorage.CURRENT_VERSION},o.setUpdated=function(e){o.updated=e},o.getUpdated=function(){return o.updated},t.exports=o},{"./logger":6}]},{},[5]);